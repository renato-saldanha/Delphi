program Project3;

{$APPTYPE CONSOLE}
{$R *.res}

uses
  System.SysUtils,
  Horse,
  Horse.Jhonson,
  Horse.BasicAuthentication,
  Provider.Conexao in 'src\Providers\Provider.Conexao.pas' {Conexao: TDataModule},
  Controller.Animal in 'src\Controller\Controller.Animal.pas',
  Services.Animal in 'src\Services\Services.Animal.pas' {ServiceAnimal: TDataModule};

begin
  try
    THorse
      .Use(Jhonson())
      .Use(HandleException)
      .Use(HorseBasicAuthentication(
        function(const AUsername, APassword: string): Boolean
        begin
          // Here inside you can access your database and validate if username and password are valid
          Result := AUsername.Equals('user') and APassword.Equals('password');
        end));;

    Registry;

    THorse.Listen(9000);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;

end.
